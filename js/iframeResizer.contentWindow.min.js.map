{"version":3,"file":"iframeResizer.contentWindow.min.js","sources":["../src/iframeResizer.contentWindow.js"],"sourcesContent":["/*\n * File: iframeResizer.contentWindow.js\n * Desc: Include this file in any page being loaded into an iframe\n *       to force the iframe to resize to the content size.\n * Requires: iframeResizer.js on host page.\n * Doc: https://github.com/davidjbradshaw/iframe-resizer\n * Author: David J. Bradshaw - dave@bradshaw.net\n *\n */\n\n//no-shadow-restricted-names\n(function (undefined) {\n  if (typeof window === 'undefined') return; // don't run for server side render\n\n  let autoResize = true;\n  const base = 10;\n  let bodyBackground = '';\n  let bodyMargin = 0;\n  let bodyMarginStr = '';\n  let bodyObserver = null;\n  let bodyPadding = '';\n  let calculateWidth = false;\n  const doubleEventList = { resize: 1, click: 1 };\n  const eventCancelTimer = 128;\n  let firstRun = true;\n  let height = 1;\n  const heightCalcModeDefault = 'bodyOffset';\n  let heightCalcMode = heightCalcModeDefault;\n  let initLock = true;\n  let initMsg = '';\n  let inPageLinks = {};\n  let interval = 32;\n  let intervalTimer = null;\n  let logging = false;\n  let mouseEvents = false;\n  const msgID = '[iFrameSizer]'; // Must match host page msg ID\n  const msgIdLen = msgID.length;\n  let myID = '';\n  const resetRequiredMethods = {\n    max: 1,\n    min: 1,\n    bodyScroll: 1,\n    documentElementScroll: 1,\n  };\n  let resizeFrom = 'child';\n  const sendPermit = true;\n  let target = window.parent;\n  let targetOriginDefault = '*';\n  let tolerance = 0;\n  let triggerLocked = false;\n  let triggerLockedTimer = null;\n  let throttledTimer = 16;\n  let width = 1;\n  const widthCalcModeDefault = 'scroll';\n  let widthCalcMode = widthCalcModeDefault;\n  let win = window;\n\n  let onMessage = function () {\n    warn('onMessage function not defined');\n  };\n\n  let onReady = function () {};\n\n  let onPageInfo = function () {};\n\n  const customCalcMethods = {\n    height: function () {\n      warn('Custom height calculation function not defined');\n\n      return document.documentElement.offsetHeight;\n    },\n    width: function () {\n      warn('Custom width calculation function not defined');\n\n      return document.body.scrollWidth;\n    },\n  };\n  const eventHandlersByName = {};\n  let passiveSupported = false;\n\n  function noop () {}\n\n  try {\n    const options = Object.create(\n      {},\n      {\n        passive: {\n          get: function () { // eslint-disable-line getter-return\n            passiveSupported = true;\n          },\n        },\n      }\n    );\n    window.addEventListener('test', noop, options);\n    window.removeEventListener('test', noop, options);\n  } catch (error) {\n    /* */\n  }\n\n  function addEventListener (el, evt, func, options) {\n    el.addEventListener(evt, func, passiveSupported ? options || {} : false);\n  }\n\n  function removeEventListener (el, evt, func) {\n    el.removeEventListener(evt, func, false);\n  }\n\n  function capitalizeFirstLetter (string) {\n    return string.charAt(0).toUpperCase() + string.slice(1);\n  }\n\n  // Based on underscore.js\n  function throttle (func) {\n    let context;\n    let args;\n    let result;\n    let timeout = null;\n    let previous = 0;\n\n    const later = function () {\n      previous = Date.now();\n      timeout = null;\n      result = func.apply(context, args);\n\n      if (!timeout) {\n        // eslint-disable-next-line no-multi-assign\n        context = args = null;\n      }\n    };\n\n    return function () {\n      const now = Date.now();\n\n      if (!previous) {\n        previous = now;\n      }\n\n      const remaining = throttledTimer - (now - previous);\n\n      context = this;\n      args = arguments;\n\n      if (remaining <= 0 || remaining > throttledTimer) {\n        if (timeout) {\n          clearTimeout(timeout);\n          timeout = null;\n        }\n\n        previous = now;\n        result = func.apply(context, args);\n\n        if (!timeout) {\n          // eslint-disable-next-line no-multi-assign\n          context = args = null;\n        }\n      } else if (!timeout) {\n        timeout = setTimeout(later, remaining);\n      }\n\n      return result;\n    };\n  }\n\n  function formatLogMsg (msg) {\n    return msgID + '[' + myID + '] ' + msg;\n  }\n\n  function log (msg) {\n    if (logging && typeof window.console === 'object') {\n      // eslint-disable-next-line no-console\n      console.log(formatLogMsg(msg));\n    }\n  }\n\n  function warn (msg) {\n    if (typeof window.console === 'object') {\n      // eslint-disable-next-line no-console\n      console.warn(formatLogMsg(msg));\n    }\n  }\n\n  function init () {\n    readDataFromParent();\n    log('Initialising iFrame (' + window.location.href + ')');\n    readDataFromPage();\n    setMargin();\n    setBodyStyle('background', bodyBackground);\n    setBodyStyle('padding', bodyPadding);\n    injectClearFixIntoBodyElement();\n    checkHeightMode();\n    checkWidthMode();\n    stopInfiniteResizingOfIFrame();\n    setupPublicMethods();\n    setupMouseEvents();\n    startEventListeners();\n    inPageLinks = setupInPageLinks();\n    sendSize('init', 'Init message from host page');\n    onReady();\n  }\n\n  function readDataFromParent () {\n    function strBool (str) {\n      return str === 'true';\n    }\n\n    const data = initMsg.slice(msgIdLen).split(':');\n\n    myID = data[0];\n    // For V1 compatibility\n    bodyMargin = undefined === data[1] ? bodyMargin : Number(data[1]);\n\n    calculateWidth = undefined === data[2] ? calculateWidth : strBool(data[2]);\n    logging = undefined === data[3] ? logging : strBool(data[3]);\n    interval = undefined === data[4] ? interval : Number(data[4]);\n    autoResize = undefined === data[6] ? autoResize : strBool(data[6]);\n    bodyMarginStr = data[7];\n    heightCalcMode = undefined === data[8] ? heightCalcMode : data[8];\n    bodyBackground = data[9];\n    bodyPadding = data[10];\n    tolerance = undefined === data[11] ? tolerance : Number(data[11]);\n    inPageLinks.enable = undefined === data[12] ? false : strBool(data[12]);\n    resizeFrom = undefined === data[13] ? resizeFrom : data[13];\n    widthCalcMode = undefined === data[14] ? widthCalcMode : data[14];\n    mouseEvents = undefined === data[15] ? mouseEvents : Boolean(data[15]);\n  }\n\n  function depricate (key) {\n    const splitName = key.split('Callback');\n\n    if (splitName.length === 2) {\n      const name =\n        'on' + splitName[0].charAt(0).toUpperCase() + splitName[0].slice(1);\n      this[name] = this[key];\n      delete this[key];\n      warn(\n        \"Deprecated: '\" +\n          key +\n          \"' has been renamed '\" +\n          name +\n          \"'. The old method will be removed in the next major version.\"\n      );\n    }\n  }\n\n  function readDataFromPage () {\n    function readData () {\n      const data = window.iFrameResizer;\n\n      log('Reading data from page: ' + JSON.stringify(data));\n      Object.keys(data).forEach(depricate, data);\n\n      onMessage = 'onMessage' in data ? data.onMessage : onMessage;\n      onReady = 'onReady' in data ? data.onReady : onReady;\n      targetOriginDefault =\n        'targetOrigin' in data ? data.targetOrigin : targetOriginDefault;\n      heightCalcMode =\n        'heightCalculationMethod' in data\n          ? data.heightCalculationMethod\n          : heightCalcMode;\n      widthCalcMode =\n        'widthCalculationMethod' in data\n          ? data.widthCalculationMethod\n          : widthCalcMode;\n    }\n\n    function setupCustomCalcMethods (calcMode, calcFunc) {\n      if (typeof calcMode === 'function') {\n        log('Setup custom ' + calcFunc + 'CalcMethod');\n        customCalcMethods[calcFunc] = calcMode;\n        calcMode = 'custom';\n      }\n\n      return calcMode;\n    }\n\n    if (\n      'iFrameResizer' in window &&\n      Object === window.iFrameResizer.constructor\n    ) {\n      readData();\n      heightCalcMode = setupCustomCalcMethods(heightCalcMode, 'height');\n      widthCalcMode = setupCustomCalcMethods(widthCalcMode, 'width');\n    }\n\n    log('TargetOrigin for parent set to: ' + targetOriginDefault);\n  }\n\n  function chkCSS (attr, value) {\n    if (value.indexOf('-') !== -1) {\n      warn('Negative CSS value ignored for ' + attr);\n      value = '';\n    }\n\n    return value;\n  }\n\n  function setBodyStyle (attr, value) {\n    if (undefined !== value && value !== '' && value !== 'null') {\n      document.body.style[attr] = value;\n      log('Body ' + attr + ' set to \"' + value + '\"');\n    }\n  }\n\n  function setMargin () {\n    // If called via V1 script, convert bodyMargin from int to str\n    if (undefined === bodyMarginStr) {\n      bodyMarginStr = bodyMargin + 'px';\n    }\n\n    setBodyStyle('margin', chkCSS('margin', bodyMarginStr));\n  }\n\n  function stopInfiniteResizingOfIFrame () {\n    document.documentElement.style.height = '';\n    document.body.style.height = '';\n    log('HTML & body height set to \"auto\"');\n  }\n\n  function manageTriggerEvent (options) {\n    const listener = {\n      add: function (eventName) {\n        function handleEvent () {\n          sendSize(options.eventName, options.eventType);\n        }\n\n        eventHandlersByName[eventName] = handleEvent;\n\n        addEventListener(window, eventName, handleEvent, { passive: true });\n      },\n      remove: function (eventName) {\n        const handleEvent = eventHandlersByName[eventName];\n        delete eventHandlersByName[eventName];\n\n        removeEventListener(window, eventName, handleEvent);\n      },\n    };\n\n    if (options.eventNames && Array.prototype.map) {\n      options.eventName = options.eventNames[0];\n      options.eventNames.map(listener[options.method]);\n    } else {\n      listener[options.method](options.eventName);\n    }\n\n    log(\n      capitalizeFirstLetter(options.method) +\n        ' event listener: ' +\n        options.eventType\n    );\n  }\n\n  function manageEventListeners (method) {\n    manageTriggerEvent({\n      method,\n      eventType: 'Animation Start',\n      eventNames: ['animationstart', 'webkitAnimationStart'],\n    });\n    manageTriggerEvent({\n      method,\n      eventType: 'Animation Iteration',\n      eventNames: ['animationiteration', 'webkitAnimationIteration'],\n    });\n    manageTriggerEvent({\n      method,\n      eventType: 'Animation End',\n      eventNames: ['animationend', 'webkitAnimationEnd'],\n    });\n    manageTriggerEvent({\n      method,\n      eventType: 'Input',\n      eventName: 'input',\n    });\n    manageTriggerEvent({\n      method,\n      eventType: 'Mouse Up',\n      eventName: 'mouseup',\n    });\n    manageTriggerEvent({\n      method,\n      eventType: 'Mouse Down',\n      eventName: 'mousedown',\n    });\n    manageTriggerEvent({\n      method,\n      eventType: 'Orientation Change',\n      eventName: 'orientationchange',\n    });\n    manageTriggerEvent({\n      method,\n      eventType: 'Print',\n      eventNames: ['afterprint', 'beforeprint'],\n    });\n    manageTriggerEvent({\n      method,\n      eventType: 'Ready State Change',\n      eventName: 'readystatechange',\n    });\n    manageTriggerEvent({\n      method,\n      eventType: 'Touch Start',\n      eventName: 'touchstart',\n    });\n    manageTriggerEvent({\n      method,\n      eventType: 'Touch End',\n      eventName: 'touchend',\n    });\n    manageTriggerEvent({\n      method,\n      eventType: 'Touch Cancel',\n      eventName: 'touchcancel',\n    });\n    manageTriggerEvent({\n      method,\n      eventType: 'Transition Start',\n      eventNames: [\n        'transitionstart',\n        'webkitTransitionStart',\n        'MSTransitionStart',\n        'oTransitionStart',\n        'otransitionstart',\n      ],\n    });\n    manageTriggerEvent({\n      method,\n      eventType: 'Transition Iteration',\n      eventNames: [\n        'transitioniteration',\n        'webkitTransitionIteration',\n        'MSTransitionIteration',\n        'oTransitionIteration',\n        'otransitioniteration',\n      ],\n    });\n    manageTriggerEvent({\n      method,\n      eventType: 'Transition End',\n      eventNames: [\n        'transitionend',\n        'webkitTransitionEnd',\n        'MSTransitionEnd',\n        'oTransitionEnd',\n        'otransitionend',\n      ],\n    });\n\n    if (resizeFrom === 'child') {\n      manageTriggerEvent({\n        method,\n        eventType: 'IFrame Resized',\n        eventName: 'resize',\n      });\n    }\n  }\n\n  function checkCalcMode (calcMode, calcModeDefault, modes, type) {\n    if (calcModeDefault !== calcMode) {\n      if (!(calcMode in modes)) {\n        warn(\n          calcMode + ' is not a valid option for ' + type + 'CalculationMethod.'\n        );\n        calcMode = calcModeDefault;\n      }\n\n      log(type + ' calculation method set to \"' + calcMode + '\"');\n    }\n\n    return calcMode;\n  }\n\n  function checkHeightMode () {\n    heightCalcMode = checkCalcMode(\n      heightCalcMode,\n      heightCalcModeDefault,\n      getHeight,\n      'height'\n    );\n  }\n\n  function checkWidthMode () {\n    widthCalcMode = checkCalcMode(\n      widthCalcMode,\n      widthCalcModeDefault,\n      getWidth,\n      'width'\n    );\n  }\n\n  function startEventListeners () {\n    if (autoResize === true) {\n      manageEventListeners('add');\n      setupMutationObserver();\n    } else {\n      log('Auto Resize disabled');\n    }\n  }\n\n  //   function stopMsgsToParent() {\n  //     log('Disable outgoing messages')\n  //     sendPermit = false\n  //   }\n\n  //   function removeMsgListener() {\n  //     log('Remove event listener: Message')\n  //     removeEventListener(window, 'message', receiver)\n  //   }\n\n  function disconnectMutationObserver () {\n    if (bodyObserver !== null) {\n      /* istanbul ignore next */ // Not testable in PhantonJS\n      bodyObserver.disconnect();\n    }\n  }\n\n  function stopEventListeners () {\n    manageEventListeners('remove');\n    disconnectMutationObserver();\n    clearInterval(intervalTimer);\n  }\n\n  //   function teardown() {\n  //     stopMsgsToParent()\n  //     removeMsgListener()\n  //     if (true === autoResize) stopEventListeners()\n  //   }\n\n  function injectClearFixIntoBodyElement () {\n    const clearFix = document.createElement('div');\n    clearFix.style.clear = 'both';\n    // Guard against the following having been globally redefined in CSS.\n    clearFix.style.display = 'block';\n    clearFix.style.height = '0';\n    document.body.appendChild(clearFix);\n  }\n\n  function setupInPageLinks () {\n    function getPagePosition () {\n      return {\n        x:\n          window.pageXOffset === undefined\n            ? document.documentElement.scrollLeft\n            : window.pageXOffset,\n        y:\n          window.pageYOffset === undefined\n            ? document.documentElement.scrollTop\n            : window.pageYOffset,\n      };\n    }\n\n    function getElementPosition (el) {\n      const elPosition = el.getBoundingClientRect();\n      const pagePosition = getPagePosition();\n\n      return {\n        x: parseInt(elPosition.left, 10) + parseInt(pagePosition.x, 10),\n        y: parseInt(elPosition.top, 10) + parseInt(pagePosition.y, 10),\n      };\n    }\n\n    function findTarget (location) {\n      function jumpToTarget (target) {\n        const jumpPosition = getElementPosition(target);\n\n        log(\n          'Moving to in page link (#' +\n            hash +\n            ') at x: ' +\n            jumpPosition.x +\n            ' y: ' +\n            jumpPosition.y\n        );\n        // X&Y reversed at sendMsg uses height/width\n        sendMsg(jumpPosition.y, jumpPosition.x, 'scrollToOffset');\n      }\n\n      var hash = location.split('#')[1] || location; // Remove # if present\n      const hashData = decodeURIComponent(hash);\n      const target =\n          document.getElementById(hashData) ||\n          document.getElementsByName(hashData)[0];\n\n      if (undefined === target) {\n        log(\n          'In page link (#' +\n            hash +\n            ') not found in iFrame, so sending to parent'\n        );\n        sendMsg(0, 0, 'inPageLink', '#' + hash);\n      } else {\n        jumpToTarget(target);\n      }\n    }\n\n    function checkLocationHash () {\n      const hash = window.location.hash;\n      const href = window.location.href;\n\n      if (hash !== '' && hash !== '#') {\n        findTarget(href);\n      }\n    }\n\n    function bindAnchors () {\n      function setupLink (el) {\n        function linkClicked (e) {\n          e.preventDefault();\n\n          /* jshint validthis:true */\n          findTarget(this.getAttribute('href'));\n        }\n\n        if (el.getAttribute('href') !== '#') {\n          addEventListener(el, 'click', linkClicked);\n        }\n      }\n\n      Array.prototype.forEach.call(\n        document.querySelectorAll('a[href^=\"#\"]'),\n        setupLink\n      );\n    }\n\n    function bindLocationHash () {\n      addEventListener(window, 'hashchange', checkLocationHash);\n    }\n\n    function initCheck () {\n      // Check if page loaded with location hash after init resize\n      setTimeout(checkLocationHash, eventCancelTimer);\n    }\n\n    function enableInPageLinks () {\n      /* istanbul ignore else */ // Not testable in phantonJS\n      if (Array.prototype.forEach && document.querySelectorAll) {\n        log('Setting up location.hash handlers');\n        bindAnchors();\n        bindLocationHash();\n        initCheck();\n      } else {\n        warn(\n          'In page linking not fully supported in this browser!' +\n          ' (See README.md for IE8 workaround)'\n        );\n      }\n    }\n\n    if (inPageLinks.enable) {\n      enableInPageLinks();\n    } else {\n      log('In page linking not enabled');\n    }\n\n    return {\n      findTarget,\n    };\n  }\n\n  function setupMouseEvents () {\n    if (mouseEvents !== true) return;\n\n    function sendMouse (e) {\n      sendMsg(0, 0, e.type, e.screenY + ':' + e.screenX);\n    }\n\n    function addMouseListener (evt, name) {\n      log('Add event listener: ' + name);\n      addEventListener(window.document, evt, sendMouse);\n    }\n\n    addMouseListener('mouseenter', 'Mouse Enter');\n    addMouseListener('mouseleave', 'Mouse Leave');\n  }\n\n  function setupPublicMethods () {\n    log('Enable public methods');\n\n    win.parentIFrame = {\n      autoResize: function autoResizeF (resize) {\n        if (resize === true && autoResize === false) {\n          autoResize = true;\n          startEventListeners();\n        } else if (resize === false && autoResize === true) {\n          autoResize = false;\n          stopEventListeners();\n        }\n\n        sendMsg(0, 0, 'autoResize', JSON.stringify(autoResize));\n\n        return autoResize;\n      },\n\n      close: function closeF () {\n        sendMsg(0, 0, 'close');\n        // teardown()\n      },\n\n      getId: function getIdF () {\n        return myID;\n      },\n\n      getPageInfo: function getPageInfoF (callback) {\n        if (typeof callback === 'function') {\n          onPageInfo = callback;\n          sendMsg(0, 0, 'pageInfo');\n        } else {\n          onPageInfo = function () {};\n\n          sendMsg(0, 0, 'pageInfoStop');\n        }\n      },\n\n      moveToAnchor: function moveToAnchorF (hash) {\n        inPageLinks.findTarget(hash);\n      },\n\n      reset: function resetF () {\n        resetIFrame('parentIFrame.reset');\n      },\n\n      scrollTo: function scrollToF (x, y) {\n        sendMsg(y, x, 'scrollTo'); // X&Y reversed at sendMsg uses height/width\n      },\n\n      scrollToOffset: function scrollToF (x, y) {\n        // X&Y reversed at sendMsg uses height/width\n        sendMsg(y, x, 'scrollToOffset');\n      },\n\n      sendMessage: function sendMessageF (msg, targetOrigin) {\n        sendMsg(0, 0, 'message', JSON.stringify(msg), targetOrigin);\n      },\n\n      setHeightCalculationMethod: function setHeightCalculationMethodF (\n        heightCalculationMethod\n      ) {\n        heightCalcMode = heightCalculationMethod;\n        checkHeightMode();\n      },\n\n      setWidthCalculationMethod: function setWidthCalculationMethodF (\n        widthCalculationMethod\n      ) {\n        widthCalcMode = widthCalculationMethod;\n        checkWidthMode();\n      },\n\n      setTargetOrigin: function setTargetOriginF (targetOrigin) {\n        log('Set targetOrigin: ' + targetOrigin);\n        targetOriginDefault = targetOrigin;\n      },\n\n      size: function sizeF (customHeight, customWidth) {\n        const valString =\n          '' + (customHeight || '') + (customWidth ? ',' + customWidth : '');\n        sendSize(\n          'size',\n          'parentIFrame.size(' + valString + ')',\n          customHeight,\n          customWidth\n        );\n      },\n    };\n  }\n\n  function initInterval () {\n    if (interval !== 0) {\n      log('setInterval: ' + interval + 'ms');\n      intervalTimer = setInterval(function () {\n        sendSize('interval', 'setInterval: ' + interval);\n      }, Math.abs(interval));\n    }\n  }\n\n  // Not testable in PhantomJS\n  /* istanbul ignore next */\n  function setupBodyMutationObserver () {\n    function addImageLoadListners (mutation) {\n      function addImageLoadListener (element) {\n        if (element.complete === false) {\n          log('Attach listeners to ' + element.src);\n          element.addEventListener('load', imageLoaded, false);\n          element.addEventListener('error', imageError, false);\n          elements.push(element);\n        }\n      }\n\n      if (mutation.type === 'attributes' && mutation.attributeName === 'src') {\n        addImageLoadListener(mutation.target);\n      } else if (mutation.type === 'childList') {\n        Array.prototype.forEach.call(\n          mutation.target.querySelectorAll('img'),\n          addImageLoadListener\n        );\n      }\n    }\n\n    function removeFromArray (element) {\n      elements.splice(elements.indexOf(element), 1);\n    }\n\n    function removeImageLoadListener (element) {\n      log('Remove listeners from ' + element.src);\n      element.removeEventListener('load', imageLoaded, false);\n      element.removeEventListener('error', imageError, false);\n      removeFromArray(element);\n    }\n\n    function imageEventTriggered (event, type, typeDesc) {\n      removeImageLoadListener(event.target);\n      sendSize(type, typeDesc + ': ' + event.target.src);\n    }\n\n    function imageLoaded (event) {\n      imageEventTriggered(event, 'imageLoad', 'Image loaded');\n    }\n\n    function imageError (event) {\n      imageEventTriggered(event, 'imageLoadFailed', 'Image load failed');\n    }\n\n    function mutationObserved (mutations) {\n      sendSize(\n        'mutationObserver',\n        'mutationObserver: ' + mutations[0].target + ' ' + mutations[0].type\n      );\n\n      // Deal with WebKit / Blink asyncing image loading when\n      // tags are injected into the page\n      mutations.forEach(addImageLoadListners);\n    }\n\n    function createMutationObserver () {\n      const target = document.querySelector('body');\n      const config = {\n        attributes: true,\n        attributeOldValue: false,\n        characterData: true,\n        characterDataOldValue: false,\n        childList: true,\n        subtree: true,\n      };\n\n      observer = new MutationObserver(mutationObserved);\n\n      log('Create body MutationObserver');\n      observer.observe(target, config);\n\n      return observer;\n    }\n\n    var elements = [];\n    var MutationObserver =\n        window.MutationObserver || window.WebKitMutationObserver;\n    var observer = createMutationObserver();\n\n    return {\n      disconnect: function () {\n        if ('disconnect' in observer) {\n          log('Disconnect body MutationObserver');\n          observer.disconnect();\n          elements.forEach(removeImageLoadListener);\n        }\n      },\n    };\n  }\n\n  function setupMutationObserver () {\n    const forceIntervalTimer = interval < 0;\n\n    // Not testable in PhantomJS\n    /* istanbul ignore if */ if (\n      window.MutationObserver ||\n      window.WebKitMutationObserver\n    ) {\n      if (forceIntervalTimer) {\n        initInterval();\n      } else {\n        bodyObserver = setupBodyMutationObserver();\n      }\n    } else {\n      log('MutationObserver not supported in this browser!');\n      initInterval();\n    }\n  }\n\n  // document.documentElement.offsetHeight is not reliable, so\n  // we have to jump through hoops to get a better value.\n  function getComputedStyle (prop, el) {\n    let retVal = 0;\n    el = el || document.body; // Not testable in phantonJS\n\n    retVal = document.defaultView.getComputedStyle(el, null);\n    retVal = retVal === null ? 0 : retVal[prop];\n\n    return parseInt(retVal, base);\n  }\n\n  function chkEventThottle (timer) {\n    if (timer > throttledTimer / 2) {\n      throttledTimer = 2 * timer;\n      log('Event throttle increased to ' + throttledTimer + 'ms');\n    }\n  }\n\n  // Idea from https://github.com/guardian/iframe-messenger\n  function getMaxElement (side, elements) {\n    const elementsLength = elements.length;\n    let elVal = 0;\n    let maxVal = 0;\n    const Side = capitalizeFirstLetter(side);\n    let timer = Date.now();\n\n    for (let i = 0; i < elementsLength; i++) {\n      elVal =\n        elements[i].getBoundingClientRect()[side] +\n        getComputedStyle('margin' + Side, elements[i]);\n\n      if (elVal > maxVal) {\n        maxVal = elVal;\n      }\n    }\n\n    timer = Date.now() - timer;\n\n    log('Parsed ' + elementsLength + ' HTML elements');\n    log('Element position calculated in ' + timer + 'ms');\n\n    chkEventThottle(timer);\n\n    return maxVal;\n  }\n\n  function getAllMeasurements (dimensions) {\n    return [\n      dimensions.bodyOffset(),\n      dimensions.bodyScroll(),\n      dimensions.documentElementOffset(),\n      dimensions.documentElementScroll(),\n    ];\n  }\n\n  function getTaggedElements (side, tag) {\n    function noTaggedElementsFound () {\n      warn('No tagged elements (' + tag + ') found on page');\n\n      return document.querySelectorAll('body *');\n    }\n\n    const elements = document.querySelectorAll('[' + tag + ']');\n\n    if (elements.length === 0) noTaggedElementsFound();\n\n    return getMaxElement(side, elements);\n  }\n\n  function getAllElements () {\n    return document.querySelectorAll('body *');\n  }\n\n  var getHeight = {\n    bodyOffset: function getBodyOffsetHeight () {\n      return (\n        document.body.offsetHeight +\n          getComputedStyle('marginTop') +\n          getComputedStyle('marginBottom')\n      );\n    },\n\n    offset: function () {\n      return getHeight.bodyOffset(); // Backwards compatibility\n    },\n\n    bodyScroll: function getBodyScrollHeight () {\n      return document.body.scrollHeight;\n    },\n\n    custom: function getCustomWidth () {\n      return customCalcMethods.height();\n    },\n\n    documentElementOffset: function getDEOffsetHeight () {\n      return document.documentElement.offsetHeight;\n    },\n\n    documentElementScroll: function getDEScrollHeight () {\n      return document.documentElement.scrollHeight;\n    },\n\n    max: function getMaxHeight () {\n      return Math.max.apply(null, getAllMeasurements(getHeight));\n    },\n\n    min: function getMinHeight () {\n      return Math.min.apply(null, getAllMeasurements(getHeight));\n    },\n\n    grow: function growHeight () {\n      return getHeight.max(); // Run max without the forced downsizing\n    },\n\n    lowestElement: function getBestHeight () {\n      return Math.max(\n        getHeight.bodyOffset() || getHeight.documentElementOffset(),\n        getMaxElement('bottom', getAllElements())\n      );\n    },\n\n    taggedElement: function getTaggedElementsHeight () {\n      return getTaggedElements('bottom', 'data-iframe-height');\n    },\n  };\n  var getWidth = {\n    bodyScroll: function getBodyScrollWidth () {\n      return document.body.scrollWidth;\n    },\n\n    bodyOffset: function getBodyOffsetWidth () {\n      return document.body.offsetWidth;\n    },\n\n    custom: function getCustomWidth () {\n      return customCalcMethods.width();\n    },\n\n    documentElementScroll: function getDEScrollWidth () {\n      return document.documentElement.scrollWidth;\n    },\n\n    documentElementOffset: function getDEOffsetWidth () {\n      return document.documentElement.offsetWidth;\n    },\n\n    scroll: function getMaxWidth () {\n      return Math.max(getWidth.bodyScroll(), getWidth.documentElementScroll());\n    },\n\n    max: function getMaxWidth () {\n      return Math.max.apply(null, getAllMeasurements(getWidth));\n    },\n\n    min: function getMinWidth () {\n      return Math.min.apply(null, getAllMeasurements(getWidth));\n    },\n\n    rightMostElement: function rightMostElement () {\n      return getMaxElement('right', getAllElements());\n    },\n\n    taggedElement: function getTaggedElementsWidth () {\n      return getTaggedElements('right', 'data-iframe-width');\n    },\n  };\n\n  function sizeIFrame (\n    triggerEvent,\n    triggerEventDesc,\n    customHeight,\n    customWidth\n  ) {\n    function resizeIFrame () {\n      height = currentHeight;\n      width = currentWidth;\n\n      sendMsg(height, width, triggerEvent);\n    }\n\n    function isSizeChangeDetected () {\n      function checkTolarance (a, b) {\n        const retVal = Math.abs(a - b) <= tolerance;\n\n        return !retVal;\n      }\n\n      currentHeight =\n        undefined === customHeight ? getHeight[heightCalcMode]() : customHeight;\n      currentWidth =\n        undefined === customWidth ? getWidth[widthCalcMode]() : customWidth;\n\n      return (\n        checkTolarance(height, currentHeight) ||\n        (calculateWidth && checkTolarance(width, currentWidth))\n      );\n    }\n\n    function isForceResizableEvent () {\n      return !(triggerEvent in { init: 1, interval: 1, size: 1 });\n    }\n\n    function isForceResizableCalcMode () {\n      return (\n        heightCalcMode in resetRequiredMethods ||\n        (calculateWidth && widthCalcMode in resetRequiredMethods)\n      );\n    }\n\n    function logIgnored () {\n      log('No change in size detected');\n    }\n\n    function checkDownSizing () {\n      if (isForceResizableEvent() && isForceResizableCalcMode()) {\n        resetIFrame(triggerEventDesc);\n      } else if (!(triggerEvent in { interval: 1 })) {\n        logIgnored();\n      }\n    }\n\n    let currentHeight, currentWidth;\n\n    if (isSizeChangeDetected() || triggerEvent === 'init') {\n      lockTrigger();\n      resizeIFrame();\n    } else {\n      checkDownSizing();\n    }\n  }\n\n  const sizeIFrameThrottled = throttle(sizeIFrame);\n\n  function sendSize (\n    triggerEvent,\n    triggerEventDesc,\n    customHeight,\n    customWidth\n  ) {\n    function recordTrigger () {\n      if (!(triggerEvent in { reset: 1, resetPage: 1, init: 1 })) {\n        log('Trigger event: ' + triggerEventDesc);\n      }\n    }\n\n    function isDoubleFiredEvent () {\n      return triggerLocked && triggerEvent in doubleEventList;\n    }\n\n    if (isDoubleFiredEvent()) {\n      log('Trigger event cancelled: ' + triggerEvent);\n    } else {\n      recordTrigger();\n\n      if (triggerEvent === 'init') {\n        sizeIFrame(triggerEvent, triggerEventDesc, customHeight, customWidth);\n      } else {\n        sizeIFrameThrottled(\n          triggerEvent,\n          triggerEventDesc,\n          customHeight,\n          customWidth\n        );\n      }\n    }\n  }\n\n  function lockTrigger () {\n    if (!triggerLocked) {\n      triggerLocked = true;\n      log('Trigger event lock on');\n    }\n\n    clearTimeout(triggerLockedTimer);\n    triggerLockedTimer = setTimeout(function () {\n      triggerLocked = false;\n      log('Trigger event lock off');\n      log('--');\n    }, eventCancelTimer);\n  }\n\n  function triggerReset (triggerEvent) {\n    height = getHeight[heightCalcMode]();\n    width = getWidth[widthCalcMode]();\n\n    sendMsg(height, width, triggerEvent);\n  }\n\n  function resetIFrame (triggerEventDesc) {\n    const hcm = heightCalcMode;\n    heightCalcMode = heightCalcModeDefault;\n\n    log('Reset trigger event: ' + triggerEventDesc);\n    lockTrigger();\n    triggerReset('reset');\n\n    heightCalcMode = hcm;\n  }\n\n  function sendMsg (height, width, triggerEvent, msg, targetOrigin) {\n    function setTargetOrigin () {\n      if (undefined === targetOrigin) {\n        targetOrigin = targetOriginDefault;\n      } else {\n        log('Message targetOrigin: ' + targetOrigin);\n      }\n    }\n\n    function sendToParent () {\n      const size = height + ':' + width;\n      const message =\n          myID +\n          ':' +\n          size +\n          ':' +\n          triggerEvent +\n          (undefined === msg ? '' : ':' + msg);\n\n      log('Sending message to host page (' + message + ')');\n      target.postMessage(msgID + message, targetOrigin);\n    }\n\n    if (sendPermit === true) {\n      setTargetOrigin();\n      sendToParent();\n    }\n  }\n\n  function receiver (event) {\n    const processRequestFromParent = {\n      init: function initFromParent () {\n        initMsg = event.data;\n        target = event.source;\n\n        init();\n        firstRun = false;\n        setTimeout(function () {\n          initLock = false;\n        }, eventCancelTimer);\n      },\n\n      reset: function resetFromParent () {\n        if (initLock) {\n          log('Page reset ignored by init');\n        } else {\n          log('Page size reset by host page');\n          triggerReset('resetPage');\n        }\n      },\n\n      resize: function resizeFromParent () {\n        sendSize('resizeParent', 'Parent window requested size check');\n      },\n\n      moveToAnchor: function moveToAnchorF () {\n        inPageLinks.findTarget(getData());\n      },\n      inPageLink: function inPageLinkF () {\n        this.moveToAnchor();\n      }, // Backward compatibility\n\n      pageInfo: function pageInfoFromParent () {\n        const msgBody = getData();\n        log('PageInfoFromParent called from parent: ' + msgBody);\n        onPageInfo(JSON.parse(msgBody));\n        log(' --');\n      },\n\n      message: function messageFromParent () {\n        const msgBody = getData();\n\n        log('onMessage called from parent: ' + msgBody);\n        onMessage(JSON.parse(msgBody));\n        log(' --');\n      },\n    };\n\n    function isMessageForUs () {\n      // ''+ Protects against non-string messages\n      return msgID === ('' + event.data).slice(0, msgIdLen);\n    }\n\n    function getMessageType () {\n      return event.data.split(']')[1].split(':')[0];\n    }\n\n    function getData () {\n      return event.data.slice(event.data.indexOf(':') + 1);\n    }\n\n    function isMiddleTier () {\n      return (\n        (!(typeof module !== 'undefined' && module.exports) &&\n          'iFrameResize' in window) ||\n        (\n          window.jQuery !== undefined &&\n          'iFrameResize' in window.jQuery.prototype\n        )\n      );\n    }\n\n    function isInitMsg () {\n      // Test if this message is from a child below us.\n      // This is an ugly test, however, updating\n      // the message format would break backwards compatibility.\n      return event.data.split(':')[2] in { true: 1, false: 1 };\n    }\n\n    function callFromParent () {\n      const messageType = getMessageType();\n\n      if (messageType in processRequestFromParent) {\n        processRequestFromParent[messageType]();\n      } else if (!isMiddleTier() && !isInitMsg()) {\n        warn('Unexpected message (' + event.data + ')');\n      }\n    }\n\n    function processMessage () {\n      if (firstRun === false) {\n        callFromParent();\n      } else if (isInitMsg()) {\n        processRequestFromParent.init();\n      } else {\n        log(\n          'Ignored message of type \"' +\n            getMessageType() +\n            '\". Received before initialization.'\n        );\n      }\n    }\n\n    if (isMessageForUs()) {\n      processMessage();\n    }\n  }\n\n  // Normally the parent kicks things off when it detects the iFrame has loaded.\n  // If this script is async-loaded, then tell parent page to retry init.\n  function chkLateLoaded () {\n    if (document.readyState !== 'loading') {\n      window.parent.postMessage('[iFrameResizerChild]Ready', '*');\n    }\n  }\n\n  addEventListener(window, 'message', receiver);\n  addEventListener(window, 'readystatechange', chkLateLoaded);\n  chkLateLoaded();\n\n  // TEST CODE START //\n\n  // Create test hooks\n\n  function mockMsgListener (msgObject) {\n    receiver(msgObject);\n\n    return win;\n  }\n\n  win = {};\n\n  removeEventListener(window, 'message', receiver);\n\n  // eslint-disable-next-line no-undef\n  define([], function () {\n    return mockMsgListener;\n  });\n\n  // TEST CODE END //\n})();\n"],"names":["undefined","window","autoResize","base","bodyBackground","bodyMargin","bodyMarginStr","bodyObserver","bodyPadding","calculateWidth","doubleEventList","resize","click","eventCancelTimer","firstRun","height","heightCalcModeDefault","heightCalcMode","initLock","initMsg","inPageLinks","interval","intervalTimer","logging","mouseEvents","msgID","msgIdLen","length","myID","resetRequiredMethods","max","min","bodyScroll","documentElementScroll","resizeFrom","target","parent","targetOriginDefault","tolerance","triggerLocked","triggerLockedTimer","throttledTimer","width","widthCalcModeDefault","widthCalcMode","win","onMessage","warn","onReady","onPageInfo","customCalcMethods","document","documentElement","offsetHeight","body","scrollWidth","eventHandlersByName","passiveSupported","noop","options","Object","create","passive","get","addEventListener","removeEventListener","error","el","evt","func","capitalizeFirstLetter","string","charAt","toUpperCase","slice","formatLogMsg","msg","log","console","init","strBool","str","data","split","Number","enable","Boolean","readDataFromParent","location","href","readData","iFrameResizer","JSON","stringify","keys","forEach","depricate","targetOrigin","heightCalculationMethod","widthCalculationMethod","setupCustomCalcMethods","calcMode","calcFunc","constructor","readDataFromPage","setBodyStyle","attr","value","indexOf","chkCSS","setMargin","clearFix","createElement","style","clear","display","appendChild","injectClearFixIntoBodyElement","checkHeightMode","checkWidthMode","parentIFrame","startEventListeners","manageEventListeners","disconnect","clearInterval","sendMsg","close","getId","getPageInfo","callback","moveToAnchor","hash","findTarget","reset","resetIFrame","scrollTo","x","y","scrollToOffset","sendMessage","setHeightCalculationMethod","setWidthCalculationMethod","setTargetOrigin","size","customHeight","customWidth","sendSize","sendMouse","e","type","screenY","screenX","addMouseListener","name","setupMouseEvents","getPagePosition","pageXOffset","scrollLeft","pageYOffset","scrollTop","getElementPosition","elPosition","getBoundingClientRect","pagePosition","parseInt","left","top","jumpToTarget","jumpPosition","hashData","decodeURIComponent","getElementById","getElementsByName","checkLocationHash","bindAnchors","setupLink","linkClicked","preventDefault","this","getAttribute","Array","prototype","call","querySelectorAll","bindLocationHash","initCheck","setTimeout","enableInPageLinks","setupInPageLinks","key","splitName","manageTriggerEvent","listener","add","eventName","handleEvent","eventType","remove","eventNames","map","method","checkCalcMode","calcModeDefault","modes","getHeight","getWidth","forceIntervalTimer","MutationObserver","WebKitMutationObserver","initInterval","addImageLoadListners","mutation","addImageLoadListener","element","complete","src","imageLoaded","imageError","elements","push","attributeName","removeFromArray","splice","removeImageLoadListener","imageEventTriggered","event","typeDesc","mutationObserved","mutations","createMutationObserver","querySelector","config","attributes","attributeOldValue","characterData","characterDataOldValue","childList","subtree","observer","observe","setupBodyMutationObserver","setupMutationObserver","setInterval","Math","abs","getComputedStyle","prop","retVal","defaultView","getMaxElement","side","elementsLength","elVal","maxVal","Side","timer","Date","now","i","chkEventThottle","getAllMeasurements","dimensions","bodyOffset","documentElementOffset","getTaggedElements","tag","getAllElements","offset","scrollHeight","custom","apply","grow","lowestElement","taggedElement","offsetWidth","scroll","rightMostElement","sizeIFrame","triggerEvent","triggerEventDesc","currentHeight","currentWidth","checkTolarance","a","b","isSizeChangeDetected","lockTrigger","sizeIFrameThrottled","context","args","result","timeout","previous","later","remaining","arguments","clearTimeout","throttle","resetPage","triggerReset","hcm","message","postMessage","sendToParent","receiver","processRequestFromParent","source","getData","inPageLink","pageInfo","msgBody","parse","getMessageType","isInitMsg","true","false","callFromParent","messageType","module","exports","jQuery","chkLateLoaded","readyState","mockMsgListener","msgObject","define"],"mappings":"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"}